{% extends 'app/base1.html' %}
{% block content %}<br><br><br>
   <nav class="navbar second-navbar navbar-toggleable-md navbar-expand-lg scrolling-navbar double-nav">
  <form method="get" action="{% url 'app:dashboard_search' %}" class="form-inline d-flex justify-content-center md-form form-sm active-cyan-2 mt-1" style="width: 100%;" >

  <input class="form-control form-control-sm col-md-12 mr-3 " style="width: 80%;" name="q" type="text" placeholder="Search here.."
    aria-label="Search">

  </form>
</nav><br><br><br>

{% if object_list %}
            <table class="table">

    <thead>
        <tr class="text-danger" >
            <th scope="col">#</th>
            <th scope="col">Order Id</th>
            <th scope="col">Date</th>
            <th scope="col">Username</th>
            <th scope="col">Order Total</th>
            <th scope="col">Payment Mode</th>
            <th scope="col">Ordered</th>

            <th scope="col">Status</th>
        </tr>
    </thead>

    <tbody>

        {% for order in object_list %}
        {% if order.ordered == True %}
        {% if order.mode == False and order.refund_requested or order.refund_granted  %}
        <tr class="text-success " style="text-decoration: line-through">

            <th scope="row" class="text-danger">{{ forloop.counter }}</th>
            <td>{{ order.payment.txn_id }}</td>
            <td>{{ order.ordered_date }}</td>
            <td>{{ order.user.name }}</td>
            <td>{{ order.payment.amount }}</td>
            {% if order.mode == True %}
            <td>Online</td>
            {% else %}
            <td>COD</td>
            {% endif %}
            <td>{{ order.ordered }}</td>
            {% if order.refund_granted %}
                <td><small><button class='badge btn-danger'>refunded</button></small></td>
            {% elif order.mode == False and order.refund_requested %}
                <td><small><button class='badge btn-danger'>Cancelled</button></small></td>
            {% elif order.refund_requested %}
                <td><small><button class='badge btn-warning'>refund requested</button></small></td>

            {% elif order.received %}
                <td><small><button class='badge btn-success'>Delivered</button></small></td>
            {% elif order.being_delivered %}
                <td><small><button class='badge btn-primary'>Order Confirmed</button></small></td>
            {% else %}
                <td><small><button class='badge btn-info'>Pending</button></small></td>
            {% endif %}
                    <td><a href="{% url 'app:dashboard_order_details'  pk=order.pk %}"><i class="fas fa-eye btn btn-primary" aria-hidden="true"></i></a></td>
            <td><a href="{% url 'app:dashboard_order_update'  pk=order.pk %}"><i class="fas fa-edit btn btn-warning" aria-hidden="true"></i></a></td>
            <td><a href="{% url 'app:dashboard_order_delete'  pk=order.pk %}"><i class="fas fa-trash-alt btn btn-danger"></i></a></td>
        </tr>

        {% else %}
            <tr class="text-success">
            <th scope="row" class="text-danger">{{ forloop.counter }}</th>
            <td>{{ order.payment.txn_id }}</td>
            <td>{{ order.ordered_date }}</td>
            <td>{{ order.user.name }}</td>
            <td>{{ order.payment.amount }}</td>
            {% if order.mode == True %}
            <td>Online</td>
            {% else %}
            <td>COD</td>
            {% endif %}
                <td>{{ order.ordered }}</td>
            {% if order.refund_granted %}
                <td><small><button class='badge btn-danger'>refunded</button></small></td>
            {% elif order.mode == False and order.refund_requested %}
                <td><small><button class='badge btn-danger'>Cancelled</button></small></td>
            {% elif order.refund_requested %}
                <td><small><button class='badge btn-warning'>refund requested</button></small></td>

            {% elif order.received %}
                <td><small><button class='badge btn-success'>Delivered</button></small></td>
            {% elif order.being_delivered %}
                <td><small><button class='badge btn-primary'>Order Confirmed</button></small></td>
            {% else %}
                <td><small><button class='badge btn-info'>Pending</button></small></td>
            {% endif %}
                        <td><a href="{% url 'app:dashboard_order_details'  pk=order.pk %}"><i class="fas fa-eye btn btn-primary" aria-hidden="true"></i></a></td>
            <td><a href="{% url 'app:dashboard_order_update'  pk=order.pk %}"><i class="fas fa-edit btn btn-warning" aria-hidden="true"></i></a></td>
            <td><a href="{% url 'app:dashboard_order_delete'  pk=order.pk %}"><i class="fas fa-trash-alt btn btn-danger"></i></a></td>
            </tr>
        {% endif %}{% endif %}
        {% endfor %}
         {% else %}
         <h3>Sorry no data found!</h3>





</tbody>
            </table> {% endif %}


{% endblock %}